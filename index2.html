<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>El Hilo de las Nornas | Un Portal Rúnico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Fuentes: Una para legibilidad (Roboto) y otra para el alma épica (Cinzel Decorative) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  
  <style>
    /* --- FUNDAMENTOS Y AMBIENTE --- */
    :root {
      /* Paleta de colores inspirada en nuestra saga */
      --color-background: #0d1a26; /* Azul noche profundo del fiordo */
      --color-foreground: #f2e8d5; /* Pergamino, hueso, lino crudo */
      --color-text-main: #c5b8a3;  /* Texto principal, legible y suave */
      --color-text-header: #e6d9c1; /* Encabezados, más brillante */
      --color-accent-gold: #d4af37; /* Oro viejo, para detalles y acentos */
      --color-accent-wood: #6b4f35; /* Madera oscura, para contenedores */
      --font-display: 'Cinzel Decorative', serif; /* Fuente épica para títulos */
      --font-body: 'Roboto', sans-serif; /* Fuente legible para el cuerpo */
    }

    body {
      background-color: var(--color-background);
      color: var(--color-text-main);
      font-family: var(--font-body);
      margin: 0;
      overflow-x: hidden;
    }

    .world-background {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: url('https://www.transparenttextures.com/patterns/dark-wood.png'), 
                  linear-gradient(to bottom, #0d1a26, #1a2b3c);
      background-size: auto, cover;
      z-index: -1;
    }

    .world-background::before {
      content: '';
      position: absolute; top: 0; left: 0; width: 200%; height: 200%;
      background: transparent url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="1" cy="1" r="0.4" fill="%23f2e8d5"/></svg>');
      background-size: 70px 70px;
      animation: pan-background 150s linear infinite;
      opacity: 0.08;
    }

    .world-background::after {
      content: '';
      position: absolute; bottom: 0; left: 0; width: 100%; height: 40%;
      background: linear-gradient(to top, rgba(13, 26, 38, 1), transparent);
      animation: mist-flow 45s ease-in-out infinite alternate;
    }

    @keyframes pan-background {
      from { transform: translate(0,0); }
      to { transform: translate(-50%, -50%); }
    }

    @keyframes mist-flow {
      from { opacity: 0.4; transform: translateY(10%); }
      to { opacity: 0.7; transform: translateY(0); }
    }

    .app-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }

    /* --- HEADER Y NAVEGACIÓN REDISEÑADOS --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0.5rem;
      border-bottom: 1px solid rgba(212, 175, 55, 0.2);
      margin-bottom: 2rem;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo-rune {
      font-size: 2.5rem;
      color: var(--color-accent-gold);
      text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
    }

    header h1 {
      font-family: var(--font-display);
      font-size: 1.5rem; /* Ajustado para móviles */
      color: var(--color-text-header);
      margin: 0;
      letter-spacing: 2px;
    }

    #main-nav {
      display: flex;
      gap: 0.5rem;
    }

    #main-nav a {
      color: var(--color-text-main);
      text-decoration: none;
      padding: 0.5rem 0.8rem;
      position: relative;
      transition: color 0.3s ease;
      font-size: 0.9rem; /* Ajustado para móviles */
    }

    #main-nav a::after {
      content: '';
      position: absolute; bottom: 0; left: 50%;
      transform: translateX(-50%);
      width: 0; height: 2px;
      background-color: var(--color-accent-gold);
      transition: width 0.3s ease;
    }

    #main-nav a:hover, #main-nav a.active {
      color: var(--color-text-header);
    }
    #main-nav a:hover::after, #main-nav a.active::after {
      width: 60%;
    }

    /* --- ESTILOS GENERALES DE SECCIÓN --- */
    .main-section {
      background: rgba(10, 20, 30, 0.6);
      border: 1px solid rgba(107, 79, 53, 0.4);
      border-radius: 16px;
      padding: 1.5rem;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      animation: section-fade-in 0.8s ease forwards;
    }

    @keyframes section-fade-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      font-family: var(--font-display);
      color: var(--color-text-header);
      text-align: center;
      font-size: 2.2rem;
      margin-top: 0;
      margin-bottom: 1.5rem;
      text-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
    }

    /* --- ESTILOS DE COMPONENTES MEJORADOS --- */
    input[type="text"], button {
      font-family: var(--font-body);
      border-radius: 8px;
      border: 1px solid var(--color-accent-wood);
      padding: 0.8em 1em;
      background: rgba(0,0,0,0.2);
      color: var(--color-foreground);
    }
    
    button {
      background: var(--color-accent-wood);
      color: var(--color-text-header);
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    button:hover:not(:disabled) {
      background: #8a6a4f;
      transform: translateY(-2px);
    }
    
    button:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    .tipo-btn {
      background: transparent;
      border: 1px solid var(--color-accent-wood);
    }
    
    .tipo-btn.active {
      background: var(--color-accent-gold);
      color: var(--color-background);
      border-color: var(--color-accent-gold);
      font-weight: bold;
    }

    /* --- CÓDICE RÚNICO (GALERÍA) --- */
    #galeria-runas {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    #galeria-runas > div {
      flex: 0 0 90px;
      text-align: center;
      background: rgba(0,0,0,0.2);
      border: 1px solid var(--color-accent-wood);
      border-radius: 8px;
      padding: 10px 0 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      cursor: pointer;
      transition: all 0.2s;
    }
    #galeria-runas > div:hover {
      box-shadow: 0 4px 16px rgba(212,175,55,0.2);
      transform: translateY(-3px) scale(1.05);
      background: var(--color-accent-wood);
    }

    /* --- MODAL --- */
    .runa-modal-overlay {
      display: none;
      position: fixed; z-index: 1000; inset: 0;
      background: rgba(13, 26, 38, 0.85);
      backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
      justify-content: center; align-items: center;
      animation: fadeIn 0.3s;
    }
    .runa-modal-overlay.active { display: flex; }
    @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
    
    .runa-modal {
      background: var(--color-foreground);
      color: var(--color-accent-wood);
      border-radius: 16px;
      box-shadow: 0 8px 44px rgba(0,0,0,0.5);
      display: flex; gap: 32px;
      max-width: 650px; width: 98%;
      padding: 32px 28px;
      position: relative;
      font-family: var(--font-body);
      animation: modalSlideUp 0.35s cubic-bezier(0.165, 0.84, 0.44, 1);
    }
    @keyframes modalSlideUp {
      from { transform: translateY(40px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }
    
    .runa-modal-img {
      background: #e6d9c1;
      padding: 10px;
      border-radius: 12px;
      font-size: 4em;
      min-height: 150px;
      max-width: 150px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .runa-modal-nombre {
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 1.7em;
      color: var(--color-accent-wood);
    }
    .runa-modal-simbolo {
      font-size: 2.4em;
      color: var(--color-accent-wood);
    }
    .runa-modal-significado {
      font-size: 1.1em;
      color: #8c6d4e;
      font-weight: 500;
    }
    .runa-modal-interpretacion {
      background: #e9e2d3;
      border-radius: 7px;
      padding: 0.8em 1em;
      color: #3b2d1c;
    }
    .runa-modal-extra {
      font-size: 0.99em;
      color: #5a4a31;
    }
    .runa-modal-close {
      cursor: pointer;
      position: absolute;
      top: 12px; right: 12px;
      font-size: 1.8em; color: #bca170;
      background: none; border: none;
      width: 40px; height: 40px;
      border-radius: 50%;
      transition: background 0.2s, color 0.2s;
    }
    .runa-modal-close:hover {
      background: #e6d9c1;
      color: var(--color-accent-wood);
    }

    /* --- TIRADA --- */
    .tirada-runas-flex { display: flex; gap: 20px; justify-content: center; align-items: flex-start; flex-wrap: wrap; margin-top: 12px; }
    .tirada-runa-box {
      text-align: center;
      background: rgba(242, 232, 213, 0.1);
      border: 1px solid var(--color-accent-wood);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      padding: 12px 8px 10px;
      min-width: 140px;
      transition: all 0.2s;
    }
    .tirada-runa-box:hover, .tirada-runa-box:focus {
      box-shadow: 0 4px 16px rgba(212,175,55,0.4);
      transform: translateY(-3px) scale(1.03);
      background: rgba(107, 79, 53, 0.5);
      border-color: var(--color-accent-gold);
    }
    .tirada-pos { color: var(--color-text-header); font-weight: bold; }
    .tirada-simbolo { font-size: 2.1em; color: var(--color-accent-gold); }
    .tirada-nombre { font-weight: bold; font-size: 1.13em; color: var(--color-text-header); }
    .tirada-significado { color: var(--color-text-main); }
    .tirada-adivinacion { background: rgba(0,0,0,0.2); color: var(--color-text-main); padding: 0.8em 0.7em; border-radius: 7px; }

    /* Estilos de layout de Tirada y Modal no se modifican, solo se les aplica la nueva piel */
    .tirada-cruz-layout { display: grid; grid-template-areas: ". arriba ." "izquierda centro derecha" ". abajo ."; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: auto auto auto; gap: 8px; justify-items: center; align-items: center; margin-top: 10px; }
    .tirada-cruz-arriba { grid-area: arriba; } .tirada-cruz-centro { grid-area: centro; } .tirada-cruz-abajo { grid-area: abajo; } .tirada-cruz-izquierda { grid-area: izquierda; } .tirada-cruz-derecha { grid-area: derecha; }

    /* --- RESPONSIVE DESIGN --- */
    @media (max-width: 768px) {
      header { flex-direction: column; gap: 1rem; }
      header h1 { font-size: 1.4rem; }
      #main-nav { justify-content: center; flex-wrap: wrap; }
      #main-nav a { padding: 0.5rem; font-size: 0.85rem; }
      .runa-modal { flex-direction: column; gap: 12px; padding: 20px 10px 16px 10px; align-items: center; max-width: 95vw; }
      .runa-modal-img { margin: 0 auto 10px auto; font-size: 2.7em; min-width: 120px; min-height: 120px; max-width: 120px; }
      .runa-modal-info { min-width: 0; width: 97%; }
      .runa-modal-close { top: 7px; right: 7px; font-size: 1.4em; }
      .tirada-cruz-layout { grid-template-areas: "arriba" "centro" "izquierda" "derecha" "abajo"; grid-template-columns: 1fr; grid-template-rows: repeat(5, auto); }
      .tirada-cruz-arriba, .tirada-cruz-centro, .tirada-cruz-abajo, .tirada-cruz-izquierda, .tirada-cruz-derecha { width: 90%; }
      .tirada-runas-flex { flex-direction: column; align-items: center; }
      .tirada-runa-box { min-width: 250px; margin-bottom: 15px; }
    }

    footer {
        text-align: center;
        padding: 2rem 1rem;
        margin-top: 2rem;
        color: rgba(197, 184, 163, 0.5);
        border-top: 1px solid rgba(212, 175, 55, 0.1);
    }
  </style>
</head>
<body>

  <!-- CAPA DE FONDO ATMOSFÉRICO -->
  <div class="world-background"></div>

  <!-- CONTENEDOR PRINCIPAL DE LA APLICACIÓN -->
  <div class="app-container">
    <header>
      <div class="logo-container">
        <span class="logo-rune">ᛟ</span> <!-- Othala: Herencia, nuestro hogar digital -->
        <h1>El Hilo de las Nornas</h1>
      </div>
      <nav id="main-nav">
        <a href="#" data-section="inicio" class="active">Inicio</a>
        <a href="#" data-section="tirada">Oráculo</a>
        <a href="#" data-section="galeria">Códice Rúnico</a>
        <a href="#" data-section="saga">La Saga</a>
      </nav>
    </header>

    <main>
      <div class="main-content-wrapper">
        <section id="inicio" class="main-section">
          <h2>Un Portal a la Sabiduría Antigua</h2>
          <p style="text-align: center; font-size: 1.2em; max-width: 700px; margin: 0 auto 2em auto;">
            Has llegado al fiordo de Bjørndal, un lugar donde el velo entre los mundos es delgado. Aquí, las runas no son solo símbolos, son la voz del destino. Explora su sabiduría, consulta el oráculo o adéntrate en la saga de "El Hilo de las Nornas".
          </p>
           <div style="text-align: center;">
            <button onclick="document.querySelector('[data-section=tirada]').click()">Consultar el Oráculo</button>
          </div>
        </section>

        <section id="tirada" class="main-section" style="display:none">
          <h2>Ritual del Oráculo</h2>
          <div style="text-align:center; margin-bottom: 2em;">
            <label for="pregunta" style="font-weight:bold; display:block; margin-bottom: 0.5em;">Graba tu pregunta en el éter:</label>
            <input type="text" id="pregunta" placeholder="Escribe tu consulta a las Nornas..." style="width:90%;max-width:370px;">
          </div>
          <div style="text-align:center;">
            <p>Elige el ritual que más resuene con tu espíritu.</p>
            <div class="tipos-tirada" style="display:flex; justify-content:center; gap:10px; margin-bottom:1em;">
              <button class="tipo-btn active" data-tirada="simple" title="Una respuesta directa y concisa.">Una Runa</button>
              <button class="tipo-btn" data-tirada="tres" title="Pasado, Presente y Futuro.">Tres Runas</button>
              <button class="tipo-btn" data-tirada="cruz" title="Análisis profundo de una situación.">Cruz Rúnica</button>
            </div>
            <div id="explicacion-tirada" style="margin: 1em auto; max-width:500px; background: rgba(0,0,0,0.1); padding: 1em; border-radius:8px;"></div>
          </div>
          <div style="text-align:center; margin-top: 2em;">
            <button id="iniciar-ritual" disabled>Lanzar las Runas</button>
            <div id="tirada-resultado" style="margin-top:2em;"></div>
          </div>
          <template id="ejemplo-simple"><b>Una Runa:</b> Ideal para una pregunta concreta, te ofrece una guía directa.</template>
          <template id="ejemplo-tres"><b>Tres Runas:</b> Explora el flujo del tiempo: Pasado, Presente y Futuro de tu consulta.</template>
          <template id="ejemplo-cruz"><b>Cruz Rúnica:</b> Un análisis profundo: Tú, tu Guía, la Raíz del asunto, el Obstáculo y la Solución.</template>
        </section>

        <section id="galeria" class="main-section" style="display:none">
          <h2>Códice de Runas</h2>
          <div id="galeria-runas"></div>
        </section>

        <section id="saga" class="main-section" style="display:none">
          <h2>La Saga: El Hilo de las Nornas</h2>
          <div style="max-width: 800px; margin: 0 auto; line-height: 1.7;">
            <p>En el fiordo de Bjørndal, la muerte de un Jarl sin heredero amenaza con desgarrar al clan. Una joven völva, Ingrid, debe interpretar una misteriosa tirada de runas para guiar a su gente a través de una tormenta de ambición, traición y guerra inminente. La fuerza del guerrero Björn y la astucia del comerciante Hakon se enfrentan, pero las runas susurran un secreto que ninguno de los dos puede ver...</p>
            <p><em>(Aquí se podrá leer la saga completa, capítulo por capítulo, con sus ilustraciones)</em></p>
          </div>
        </section>
      </div>
    </main>
    
    <footer>
      <p>&copy; 2025 Forjado en colaboración. Un portal al mundo de las runas.</p>
    </footer>
  </div>
  
  <div class="runa-modal-overlay" id="runa-modal-overlay" tabindex="-1">
    <div class="runa-modal" role="dialog" aria-modal="true" aria-labelledby="runa-modal-nombre">
      <button class="runa-modal-close" id="runa-modal-close" aria-label="Cerrar modal">&times;</button>
      <div class="runa-modal-img" id="runa-modal-img"></div>
      <div class="runa-modal-info">
        <h3 class="runa-modal-nombre" id="runa-modal-nombre"></h3>
        <div class="runa-modal-significado" id="runa-modal-significado"></div>
        <div class="runa-modal-interpretacion" id="runa-modal-interpretacion"></div>
        <div class="runa-modal-extra" id="runa-modal-extra"></div>
      </div>
    </div>
  </div>

  <script>
    const runas = [
      { nombre: 'Fehu', simbolo: 'ᚠ', img: 'fehu.png', significado: 'Riqueza, abundancia, inicio de proyectos y recursos.', extra: 'Representa el ganado, la prosperidad material, la energía de inicio y la importancia de valorar lo que ya se posee. Suele indicar oportunidades de ganancia, pero también la necesidad de cuidar y compartir.', interpretacion: "La energía de Fehu te invita a valorar los recursos presentes y a usarlos con sabiduría. Es momento de reconocer la abundancia en tu vida y actuar con generosidad." },
      { nombre: 'Uruz', simbolo: 'ᚢ', img: 'uruz.png', significado: 'Fuerza vital, poder, salud y energía para superar desafíos.', extra: 'Conectada al buey salvaje, Uruz señala la fuerza bruta, la vitalidad y la capacidad de transformación. Invita a aprovechar el potencial interior y a aceptar los cambios que nos fortifican.', interpretacion: "Uruz representa la fuerza y el coraje que habitan en tu interior. Confía en tu poder para superar cualquier desafío y transforma la adversidad en crecimiento." },
      { nombre: 'Thurisaz', simbolo: 'ᚦ', img: 'thurisaz.png', significado: 'Desafío, protección, pruebas, oportunidad de aprendizaje.', extra: "Simboliza el martillo de Thor y la puerta entre mundos. Puede presagiar pruebas o confrontaciones, pero también la posibilidad de superarlas con conciencia y protección.", interpretacion: "Thurisaz señala pruebas necesarias para tu evolución. Enfrenta los obstáculos con conciencia; cada desafío es una oportunidad de aprender y fortalecerte." },
      { nombre: 'Ansuz', simbolo: 'ᚨ', img: 'ansuz.png', significado: 'Palabra, comunicación, inspiración divina, mensajes.', extra: "Ligada a Odín y la sabiduría, Ansuz indica momentos de comunicación importante, mensajes inspiradores o la necesidad de escuchar la intuición.", interpretacion: "Ansuz es la voz de la inspiración. Escucha los mensajes que llegan, comunícate desde el corazón y permite que la verdad se exprese." },
      { nombre: 'Raidho', simbolo: 'ᚱ', img: 'raidho.png', significado: 'Viaje, movimiento, evolución, camino correcto.', extra: 'Viaje físico o espiritual, la importancia de avanzar y adaptarse. Habla de ciclos, evolución y la necesidad de poner en marcha los proyectos.', interpretacion: "Raidho habla de un viaje, externo o interno. Confía en el proceso, cada paso es parte del aprendizaje. El movimiento te llevará hacia el equilibrio." },
      { nombre: 'Kenaz', simbolo: 'ᚲ', img: 'kenaz.png', significado: 'Luz, creatividad, revelaciones, apertura de caminos.', extra: 'Simboliza la antorcha, el fuego del conocimiento, la creatividad y la claridad. Revela lo oculto y ayuda a superar la oscuridad.', interpretacion: "Kenaz ilumina lo oculto. Es tiempo de crear, de encender tu fuego interior y de dejar que tu luz guíe tu camino." },
      { nombre: 'Gebo', simbolo: 'ᚷ', img: 'gebo.png', significado: 'Regalo, intercambio, generosidad, equilibrio en relaciones.', extra: 'Simboliza el dar y recibir, la reciprocidad, los pactos y las alianzas. Puede señalar la llegada de una bendición o la importancia de la cooperación.', interpretacion: "Gebo es el símbolo del regalo y el intercambio sano. Da y recibe con amor, busca el equilibrio en tus relaciones y acepta la ayuda que el universo te ofrece." },
      { nombre: 'Wunjo', simbolo: 'ᚹ', img: 'wunjo.png', significado: 'Alegría, bienestar, éxito, armonía interior.', extra: 'Representa la alegría compartida, el triunfo después de la dificultad y la llegada de la paz. Habla de plenitud y satisfacción.', interpretacion: "Wunjo anuncia alegría y armonía. Permite que la gratitud y la confianza abran la puerta a la felicidad y el éxito." },
      { nombre: 'Hagalaz', simbolo: 'ᚺ', img: 'hagalaz.png', significado: 'Cambios bruscos, pruebas, transformación necesaria.', extra: 'La runa del granizo, transformación a través de crisis. Pide aceptar lo inesperado y comprender que todo cambio trae renovación.', interpretacion: "Hagalaz aconseja aceptar los cambios repentinos y ver en ellos una oportunidad de transformación. Después de la tormenta, llega la calma." },
      { nombre: 'Nauthiz', simbolo: 'ᚾ', img: 'nauthiz.png', significado: 'Necesidad, carencia, resistencia, superación de obstáculos.', extra: 'Simboliza la necesidad, la escasez y la capacidad de resistir. Llama a la paciencia, al aprendizaje a través de las limitaciones y a la superación personal.', interpretacion: "Nauthiz señala momentos de necesidad. Acepta tus limitaciones y aprende de ellas. La paciencia y la resiliencia son tus aliadas." },
      { nombre: 'Isa', simbolo: 'ᛁ', img: 'isa.png', significado: 'Estancamiento, pausa, paciencia, introspección.', extra: 'Representa el hielo, el tiempo de quietud y reflexión. Puede señalar bloqueos, pero también la oportunidad de meditar y reorientar el rumbo.', interpretacion: "Isa te invita a la quietud y la reflexión. No fuerces el avance, aprovecha este tiempo para meditar y reencontrarte." },
      { nombre: 'Jera', simbolo: 'ᛃ', img: 'jera.png', significado: 'Ciclo, cosecha, resultados a largo plazo, recompensa.', extra: 'La runa de la cosecha y de los ciclos naturales. Indica que todo llega en su momento, recompensa al esfuerzo sostenido.', interpretacion: "Jera recompensa el esfuerzo sostenido. Todo ciclo llega a su fin y la cosecha será justa. Confía en los tiempos de la vida." },
      { nombre: 'Eihwaz', simbolo: 'ᛇ', img: 'eihwaz.png', significado: 'Resistencia, transformación, conexión con lo profundo.', extra: 'Simboliza el tejo, la conexión entre mundos y la capacidad de superar pruebas profundas. Ayuda en procesos de transformación interior.', interpretacion: "Eihwaz es transformación profunda. No temas a los cambios radicales; el renacimiento espiritual está cerca." },
      { nombre: 'Perthro', simbolo: 'ᛈ', img: 'perthro.png', significado: 'Misterio, destino, intuición, secretos revelados.', extra: 'Runa de la suerte, el azar y el destino. Nos habla de lo oculto, de lo que aún no puede conocerse. Invita a confiar en la intuición.', interpretacion: "Perthro revela misterios y secretos. Confía en tu intuición, hay verdades ocultas que pronto saldrán a la luz." },
      { nombre: 'Algiz', simbolo: 'ᛉ', img: 'algiz.png', significado: 'Protección, guía espiritual, conexión sagrada.', extra: 'Simboliza el ciervo y la protección divina. Es la runa de la defensa ante los peligros y de la conexión con lo espiritual.', interpretacion: "Algiz te protege y conecta con lo sagrado. Deja que la guía espiritual te oriente y protege tu energía." },
      { nombre: 'Sowilo', simbolo: 'ᛋ', img: 'sowilo.png', significado: 'Éxito, poder solar, claridad, victoria.', extra: 'La runa del sol, victoria sobre la oscuridad, claridad mental y energía renovada. Anuncia éxito y logros.', interpretacion: "Sowilo es el sol que ilumina tu camino. Éxito, claridad y vitalidad llegan a tu vida. Es momento de avanzar con seguridad." },
      { nombre: 'Tiwaz', simbolo: 'ᛏ', img: 'tiwaz.png', significado: 'Justicia, valentía, sacrificio, integridad.', extra: 'Simboliza la lanza del dios Tyr, la justicia y el sacrificio por el bien común. Llama a actuar con valentía y rectitud.', interpretacion: "Tiwaz exige justicia y sacrificio. Actúa con integridad, sé valiente y defiende lo que es correcto." },
      { nombre: 'Berkano', simbolo: 'ᛒ', img: 'berkano.png', significado: 'Nacimiento, crecimiento, fertilidad, nuevos comienzos.', extra: 'Runa de la madre, la fertilidad y la protección. Anuncia nacimientos, proyectos nuevos y crecimiento.', interpretacion: "Berkano anuncia nuevos comienzos. Cuida de tus proyectos como una madre y permite que crezcan con amor." },
      { nombre: 'Ehwaz', simbolo: 'ᛖ', img: 'ehwaz.png', significado: 'Movimiento, progreso, confianza mutua, apoyo.', extra: 'Simboliza el caballo, los viajes y el trabajo en equipo. Habla de confianza, avances y colaboración.', interpretacion: "Ehwaz habla de movimiento y colaboración. Confía en quienes te rodean y avanza hacia tus metas en compañía." },
      { nombre: 'Mannaz', simbolo: 'ᛗ', img: 'mannaz.png', significado: 'Humanidad, cooperación, autoconocimiento, ayuda.', extra: 'Runa del ser humano, la comunidad y la autorrealización. Llama a la introspección y a la colaboración social.', interpretacion: "Mannaz es la humanidad y el autoconocimiento. Reconoce tu valor y busca el apoyo de la comunidad." },
      { nombre: 'Laguz', simbolo: 'ᛚ', img: 'laguz.png', significado: 'Intuición, emociones, flujo, adaptabilidad.', extra: 'Runa del agua, la intuición, la adaptabilidad y las emociones profundas. Invita a fluir y a confiar en el proceso emocional.', interpretacion: "Laguz fluye como el agua. Déjate llevar por la intuición y adapta tus emociones con sabiduría." },
      { nombre: 'Ingwaz', simbolo: 'ᛜ', img: 'ingwaz.png', significado: 'Potencial, paz interna, culminación, descanso.', extra: 'Simboliza la semilla, el potencial oculto y la culminación de procesos. Habla de la importancia del reposo y la integración.', interpretacion: "Ingwaz simboliza paz y culminación. Es tiempo de finalizar procesos y disfrutar del merecido descanso." },
      { nombre: 'Dagaz', simbolo: 'ᛞ', img: 'dagaz.png', significado: 'Despertar, transformación, nuevos paradigmas.', extra: 'La runa del día, del despertar y de los cambios positivos. Indica un punto de inflexión y la llegada de la claridad.', interpretacion: "Dagaz es despertar y transformación. Estás a punto de vivir un cambio positivo y revelador." },
      { nombre: 'Othala', simbolo: 'ᛟ', img: 'othala.png', significado: 'Herencia, raíces, legado, pertenencia.', extra: 'Runa de la herencia, las tradiciones y el sentido de pertenencia. Habla de los ancestros y de la transmisión de valores.', interpretacion: "Othala conecta con tus raíces. Honra tu herencia y construye tu propio legado." }
    ];

    function openRunaModalByName(nombreRuna) {
        const r = runas.find(r => r.nombre === nombreRuna);
        if (!r) return;
        const modalOverlay = document.getElementById('runa-modal-overlay');
        const modalImg = document.getElementById('runa-modal-img');
        const modalNombre = document.getElementById('runa-modal-nombre');
        const modalSignificado = document.getElementById('runa-modal-significado');
        const modalInterpretacion = document.getElementById('runa-modal-interpretacion');
        const modalExtra = document.getElementById('runa-modal-extra');
        
        modalImg.innerHTML = `<img src="img/runas/${r.img}" alt="${r.nombre}" style="max-width:80px; display:block; margin-bottom: 6px;"><span style="font-size:2em;">${r.simbolo}</span>`;
        modalNombre.textContent = r.nombre;
        modalSignificado.textContent = r.significado || '';
        modalInterpretacion.textContent = r.interpretacion || '';
        modalExtra.textContent = r.extra || '';
        
        modalOverlay.classList.add('active');
        document.body.style.overflow = "hidden";
        document.getElementById('runa-modal-close').focus();
    }

    function activarModalEnTiradas() {
        document.querySelectorAll('.tirada-runa-box').forEach(box => {
            const nombre = box.querySelector('.tirada-nombre')?.textContent;
            if (nombre) {
                box.style.cursor = "pointer";
                box.setAttribute('role', 'button');
                box.setAttribute('aria-label', `Ver detalles de la runa ${nombre}`);
                box.tabIndex = 0;
                box.addEventListener('click', () => openRunaModalByName(nombre));
                box.addEventListener('keydown', (e) => {
                    if (e.key === "Enter" || e.key === " ") {
                        openRunaModalByName(nombre);
                        e.preventDefault();
                    }
                });
            }
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
      // SPA Navigation
      const navLinks = document.querySelectorAll('#main-nav a[data-section]');
      const sections = document.querySelectorAll('.main-section');
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const sectionId = link.getAttribute('data-section');
          navLinks.forEach(l => l.classList.remove('active'));
          link.classList.add('active');
          sections.forEach(sec => {
            sec.style.display = sec.id === sectionId ? '' : 'none';
          });
        });
      });

      // Galería
      const galeria = document.getElementById('galeria-runas');
      if(galeria) {
          galeria.innerHTML = runas.map(r => `
            <div data-nombre="${r.nombre}" tabindex="0" role="button" aria-label="Ver detalles de ${r.nombre}">
              <span style="font-size:2.4em;display:block;">${r.simbolo}</span>
              <img src="img/runas/${r.img}" alt="${r.nombre}" style="max-width:40px;display:block;margin:4px auto 8px;">
              <span style="font-weight:bold; font-size:0.9em;">${r.nombre}</span>
            </div>
          `).join('');
          galeria.querySelectorAll('div[data-nombre]').forEach(div => {
            div.addEventListener('click', () => openRunaModalByName(div.dataset.nombre));
            div.addEventListener('keydown', e => {
              if (e.key === "Enter" || e.key === " ") { openRunaModalByName(div.dataset.nombre); e.preventDefault(); }
            });
          });
      }

      // Modal Logic
      const modalOverlay = document.getElementById('runa-modal-overlay');
      const closeModalBtn = document.getElementById('runa-modal-close');
      const closeModal = () => {
        modalOverlay.classList.remove('active');
        document.body.style.overflow = "";
      };
      closeModalBtn.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', e => { if (e.target === modalOverlay) closeModal(); });
      document.addEventListener('keydown', e => { if (e.key === "Escape" && modalOverlay.classList.contains('active')) closeModal(); });

      // Tirada Logic
      const tiradaBtns = document.querySelectorAll('.tipo-btn');
      const explicacion = document.getElementById('explicacion-tirada');
      const preguntaInput = document.getElementById('pregunta');
      const tirarBtn = document.getElementById('iniciar-ritual');
      const tiradaResultado = document.getElementById('tirada-resultado');
      const templates = {
        simple: document.getElementById('ejemplo-simple').innerHTML,
        tres: document.getElementById('ejemplo-tres').innerHTML,
        cruz: document.getElementById('ejemplo-cruz').innerHTML
      };
      let tipoSeleccionado = 'simple';
      explicacion.innerHTML = templates[tipoSeleccionado];

      tiradaBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          tipoSeleccionado = btn.dataset.tirada;
          explicacion.innerHTML = templates[tipoSeleccionado];
          tiradaBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
        });
      });

      preguntaInput.addEventListener('input', () => {
        tirarBtn.disabled = preguntaInput.value.trim().length === 0;
      });

      function sacarRunas(n) {
        const baraja = [...runas];
        const extraidas = [];
        for (let i = 0; i < n && baraja.length > 0; i++) {
          const idx = Math.floor(Math.random() * baraja.length);
          extraidas.push(baraja.splice(idx, 1)[0]);
        }
        return extraidas;
      }

      tirarBtn.addEventListener('click', () => {
        tiradaResultado.innerHTML = '';
        tiradaResultado.style.opacity = 0;

        setTimeout(() => {
          if (tipoSeleccionado === 'simple') {
            const [runa] = sacarRunas(1);
            tiradaResultado.innerHTML = `<div class="tirada-runas-flex"><div class="tirada-runa-box"><span class="tirada-simbolo">${runa.simbolo}</span><span class="tirada-nombre">${runa.nombre}</span><img src="img/runas/${runa.img}" alt="${runa.nombre}" style="max-width:90px;display:block;margin:10px auto;"><div class="tirada-significado">${runa.significado}</div><div class="tirada-adivinacion"><b>Interpretación:</b><br>${runa.interpretacion}</div></div></div>`;
          } else if (tipoSeleccionado === 'tres') {
            const [r1, r2, r3] = sacarRunas(3);
            const pos = ['Pasado', 'Presente', 'Futuro'];
            tiradaResultado.innerHTML = `<div class="tirada-runas-flex">${[r1,r2,r3].map((r,i) => `<div class="tirada-runa-box"><div class="tirada-pos">${pos[i]}</div><span class="tirada-simbolo">${r.simbolo}</span><span class="tirada-nombre">${r.nombre}</span><img src="img/runas/${r.img}" alt="${r.nombre}" style="max-width:70px;display:block;margin:10px auto;"><div class="tirada-adivinacion">${r.interpretacion}</div></div>`).join('')}</div>`;
          } else if (tipoSeleccionado === 'cruz') {
            const extraidas = sacarRunas(5);
            const pos = [ { label: 'Tú / Ahora', class: 'tirada-cruz-centro' }, { label: 'Guía', class: 'tirada-cruz-arriba' }, { label: 'Raíz', class: 'tirada-cruz-abajo' }, { label: 'Obstáculo', class: 'tirada-cruz-izquierda' }, { label: 'Futuro', class: 'tirada-cruz-derecha' }];
            tiradaResultado.innerHTML = `<div class="tirada-cruz-layout">${extraidas.map((r, i) => `<div class="${pos[i].class} tirada-runa-box"><div class="tirada-pos">${pos[i].label}</div><span class="tirada-simbolo">${r.simbolo}</span><span class="tirada-nombre">${r.nombre}</span><img src="img/runas/${r.img}" alt="${r.nombre}" style="max-width:70px;display:block;margin:10px auto;"><div class="tirada-adivinacion" style="font-size:0.9em">${r.interpretacion}</div></div>`).join('')}</div>`;
          }
          activarModalEnTiradas();
          tiradaResultado.style.transition = 'opacity 0.5s';
          tiradaResultado.style.opacity = 1;
        }, 300); // Pequeño delay para la animación
      });
    });
  </script>
</body>
</html>